diff --git a/miext/shadow/shplanar.c b/miext/shadow/shplanar.c
index 3a8f05a..529f35c 100644
--- a/miext/shadow/shplanar.c
+++ b/miext/shadow/shplanar.c
@@ -26,6 +26,8 @@
 #include <dix-config.h>
 #endif
 
+#include <stdlib.h>
+
 #include    <X11/X.h>
 #include    "scrnintstr.h"
 #include    "windowstr.h"
