diff --git a/miext/shadow/shpacked.c b/miext/shadow/shpacked.c
index 8989760..1af55bb 100644
--- a/miext/shadow/shpacked.c
+++ b/miext/shadow/shpacked.c
@@ -26,6 +26,8 @@
 #include <dix-config.h>
 #endif
 
+#include <stdlib.h>
+
 #include    <X11/X.h>
 #include    "scrnintstr.h"
 #include    "windowstr.h"
